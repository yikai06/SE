import{d as c,c as p}from"./pinia-20a6ceed.js";import{e as g}from"./use-geolocation-9c96d09d.js";import"./forms-697c0855.js";import{a as f}from"./general-libs-bb1bbc34.js";import"./axios-427c969f.js";import{e as m}from"./endpoints-03992eb2.js";let a=null;const h=()=>({searchTerm:"",name:"",pageNumber:1,pageSize:9}),U=c("blogs",{state:()=>({isBusy:!1,isHistoryNavigation:!1,filters:h(),blogsPaginated:null}),getters:{isFiltersApplied:t=>t.filters.searchTerm},actions:{async getSearchResults(){a&&a.abort(),this.isBusy=!0,a=new AbortController;const t=f.get(m.BLOGS,{params:this.filters,signal:a.signal});try{const e=await g(t);this.blogsPaginated=e.data.data}catch(e){if(e.message==="canceled")return;throw e}finally{this.isBusy=!1,a=null}},parseUrl(){const e=new URL(window.location.href).searchParams,r=e.get("searchTerm")??"",o=e.get("name")??"",i=parseInt(e.get("pageNumber")??this.filters.pageNumber.toString()),s=parseInt(e.get("pageSize")??this.filters.pageSize.toString());this.filters.searchTerm=r,this.filters.name=o,this.filters.pageNumber=i,this.filters.pageSize=s},updateUrl(t=!1){const e=new URL(window.location.href),r=e.searchParams,o=Object.entries(this.filters);for(let i of o){const s=i[0],n=i[1];if(Array.isArray(n)){r.delete(s);for(let l of n)r.append(s,l);continue}r.set(s,n.toString())}t?window.history.replaceState(null,"",e.toString()):window.history.pushState(null,"",e.toString())},listenToHistory(){const t=()=>{this.parseUrl(),this.isHistoryNavigation=!0};return window.addEventListener("popstate",t),()=>window.removeEventListener("popstate",t)}}}),N=p();export{N as default,U as useBlogsStore};
