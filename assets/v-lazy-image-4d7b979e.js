import{E as B,r as n,j as l,z as h,y as E,K as f,O as p,Q as I,P,a7 as g,U as b}from"./forms-5e524d78.js";import{a as z}from"./endpoints-461b1c36.js";const O=["src","srcset"],k=["src","srcset"],L=B({__name:"v-lazy-image",props:{src:{type:String,required:!0},srcPlaceholder:{type:String,default:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},srcset:{type:String},intersectionOptions:{type:Object,default:()=>({})},usePicture:{type:Boolean,default:!1}},emits:["intersected","error","load"],setup(i,{emit:y}){const t=i,a=y;let r;const o=n(!1),u=n(!1),e=n(),d=l(()=>o.value&&t.src?t.src:t.srcPlaceholder),A=l(()=>o.value&&t.srcset?t.srcset:void 0),c=l(()=>{const s=["v-lazy-image"];return u.value&&s.push("v-lazy-image-loaded"),s}),v=()=>{e.value&&e.value.getAttribute("src")!==t.srcPlaceholder&&(u.value=!0,a("load",e.value))},m=()=>{a("error",e.value)};return h(()=>{"IntersectionObserver"in window&&e.value&&(r=new IntersectionObserver(s=>{s[0].isIntersecting&&(o.value=!0,r.disconnect(),a("intersected"))},t.intersectionOptions),r.observe(e.value))}),E(()=>{r&&r.disconnect()}),(s,_)=>i.usePicture?(f(),p("picture",{key:0,ref_key:"rootEl",ref:e,class:b(c.value)},[I(s.$slots,"default"),P("img",g(s.$attrs,{class:c.value,src:d.value,srcset:A.value,onLoad:v,onError:m}),null,16,O)],2)):(f(),p("img",g({key:1,ref_key:"rootEl",ref:e},s.$attrs,{class:c.value,src:d.value,srcset:A.value,onLoad:v,onError:m}),null,16,k))}}),C=z(L,[["__file","v-lazy-image.vue"]]);export{C as V};
