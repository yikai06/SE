import{d as B,b as n,c as l,e as h,f as I,j as m,k as f,t as b,l as k,G as p,x as E}from"./forms-697c0855.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";const z=["src","srcset"],L=["src","srcset"],O=B({__name:"v-lazy-image",props:{src:{},srcPlaceholder:{default:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},srcset:{},intersectionOptions:{},usePicture:{type:Boolean}},emits:["intersected","error","load"],setup(g,{emit:_}){const r=g,a=_;let t;const o=n(!1),i=n(!1),s=n(),u=l(()=>o.value&&r.src?r.src:r.srcPlaceholder),A=l(()=>o.value&&r.srcset?r.srcset:void 0),c=l(()=>{const e=["v-lazy-image"];return i.value&&e.push("v-lazy-image-loaded"),e}),d=()=>{s.value&&s.value.getAttribute("src")!==r.srcPlaceholder&&(i.value=!0,a("load",s.value))},v=()=>{a("error",s.value)};return h(()=>{"IntersectionObserver"in window&&s.value&&(t=new IntersectionObserver(e=>{e[0].isIntersecting&&(o.value=!0,t.disconnect(),a("intersected"))},r.intersectionOptions),t.observe(s.value))}),I(()=>{t&&t.disconnect()}),(e,y)=>e.usePicture?(m(),f("picture",{key:0,ref_key:"rootEl",ref:s,class:E(c.value)},[b(e.$slots,"default"),k("img",p(e.$attrs,{class:c.value,src:u.value,srcset:A.value,onLoad:d,onError:v}),null,16,z)],2)):(m(),f("img",p({key:1,ref_key:"rootEl",ref:s},e.$attrs,{class:c.value,src:u.value,srcset:A.value,onLoad:d,onError:v}),null,16,L))}}),V=P(O,[["__file","v-lazy-image.vue"]]);export{V};
